(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{412:function(t,a,e){"use strict";e.r(a);var r=e(54),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"http提交数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http提交数据"}},[t._v("#")]),t._v(" HTTP提交数据")]),t._v(" "),e("p",[t._v("网页开发中，向服务端提交数据是一个基本功能，工作中会大量用 xhr/fetch 的 api 或者  axios 这种封装了一层的库来做。")]),t._v(" "),e("p",[t._v("可能大家都写过很多 http/https 相关的代码，但是又没有梳理下它们有哪几种呢？")]),t._v(" "),e("p",[t._v("其实"),e("strong",[t._v("通过 http/https 向服务端传递数据的方式，基本可以分为 5 种：url param、query、form-urlencoded、form-data、json。")])]),t._v(" "),e("h2",{attrs:{id:"url-param"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#url-param"}},[t._v("#")]),t._v(" url param")]),t._v(" "),e("p",[t._v("Restful 的规范允许把参数写在 url 中，比如：")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("http://guang.zxg/person/1111\n复制代码\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("这里的 1111 就是路径中的参数（url param），服务端框架或者单页应用的路由都支持从 url 中取出参数。")]),t._v(" "),e("h2",{attrs:{id:"query"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[t._v("#")]),t._v(" query")]),t._v(" "),e("p",[t._v("通过 url 中 ？后面的用 & 分隔的字符串传递数据。比如：")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("http://guang.zxg/person?name=guang&age=20\n复制代码\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("这里的 name 和 age 就是 query 传递的数据。")]),t._v(" "),e("p",[t._v("其中非英文的字符和一些特殊字符要经过编码，可以使用 encodeURLComponent 的 api，或者使用封装了一层的 qeury-string 库来处理。")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" queryString "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'query-string'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nqueryString"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'光'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  age"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//?name=%E5%85%89&age=20")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("p",[t._v("通过 URL 传递数据的方式就这 2种，后面 3 种是通过 body 传递数据的方式。")]),t._v(" "),e("h2",{attrs:{id:"form-ulencoded"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#form-ulencoded"}},[t._v("#")]),t._v(" form-ulencoded")]),t._v(" "),e("p",[t._v("直接用 form 表单提交数据就是这种，它和 query 字符串的方式的区别只是放在了 body 里，然后指定下 content-type 是 "),e("code",[t._v("application/x-www-form-urlencoded")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b09a4411e26a40a0be7272dae3213eeb~tplv-k3u1fbpfcp-watermark.awebp?",alt:"img"}})]),t._v(" "),e("p",[t._v("因为也是 query 字符串，所以也要用 encodeURIComponent 的 api 或者 query-string 库处理下。")]),t._v(" "),e("p",[t._v("其实这种设计也很容易理解，get 是把数据拼成 query 字符串放在 url 后面，于是设计表单的 post 提交方式的时候就直接用相同的方式把数据放在了 body 里。")]),t._v(" "),e("p",[t._v("通过 & 分隔的 form-urlencoded 的方式需要对内容做 url encode，如果传递大量的数据，比如上传文件的时候就不是很合适了，因为文件 encode 一遍的话太慢了，这时候就可以用 form-data。")]),t._v(" "),e("h2",{attrs:{id:"form-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#form-data"}},[t._v("#")]),t._v(" form-data")]),t._v(" "),e("p",[t._v("form data 不再是通过 & 分隔数据，而是用 --------- + 一串数字做为分隔符。因为不是 url 的方式了，自然也不用再做 url encode。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af563395e1984ea5b90a19a04ce6730f~tplv-k3u1fbpfcp-watermark.awebp?",alt:"img"}})]),t._v(" "),e("p",[t._v("form-data 需要指定 content type 为 "),e("code",[t._v("multipart/form-data")]),t._v("，然后指定 boundary 也就是分割线。")]),t._v(" "),e("p",[t._v("body 里面就是用 boundary 分割线分割的内容。")]),t._v(" "),e("p",[t._v("很明显，这种方式适合传输文件，而且可以传输多个文件。")]),t._v(" "),e("p",[t._v("但是毕竟多了一些只是用来分隔的 boundary，所以请求体会增大。")]),t._v(" "),e("h2",{attrs:{id:"json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#json"}},[t._v("#")]),t._v(" json")]),t._v(" "),e("p",[t._v("form-urlencoded 需要对内容做 url encode，而 form data 则需要加很长的 boundary，两种方式都有一些缺点。如果只是传输 json 数据的话，不需要用这两种。")]),t._v(" "),e("p",[t._v("可以直接指定content type 为 application/json 就行：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c429166d35264cea922ebe45d399d4ef~tplv-k3u1fbpfcp-watermark.awebp?",alt:"img"}})]),t._v(" "),e("p",[t._v("我们平时传输 json 数据基本用的是这种。")]),t._v(" "),e("p",[t._v("这三种是通过 body 传递数据的方式。")]),t._v(" "),e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),e("p",[t._v("网页开发中向服务端传送数据是一个基本功能，常用的方式就 url param、query、form urlencoded、form data、json 这 5 种。")]),t._v(" "),e("p",[t._v("前 2 种是通过 url 传递数据的方式（需要对数据做 url encode），后 3 种是通过 body 传递数据。")]),t._v(" "),e("p",[t._v("form urlencoded 只是把 query 放在了 body 里，同样需要对数据做 url encoded，所以处理文件就不合适了。（content type 要指定为  "),e("code",[t._v("application/x-www-form-urlencoded")]),t._v("）")]),t._v(" "),e("p",[t._v("form data 是通过 boundary 分隔内容，不需要做 url encode，所以用来传文件很合适。但是如果不是传文件就没必要用了，因为多了一些 boundary 字符串比较占空间。（content type 要指定为 "),e("code",[t._v("multipart/form-data")]),t._v("）")]),t._v(" "),e("p",[t._v("json 是现在最常用的传递数据的方式，既不需要 url encoded，又不需要加没必要的 boundary。（指定 content type 为 "),e("code",[t._v("application/json")]),t._v("）。")]),t._v(" "),e("p",[t._v("当然，也可以指定别的 content type，比如  "),e("code",[t._v("application/xml")]),t._v("、"),e("code",[t._v("text/plain")]),t._v(" 等，但一般不会用。")]),t._v(" "),e("p",[t._v("99% 情况下，我们都是通过这 5 种 http/https 的提交数据的方式和服务端交互的。")])])}),[],!1,null,null,null);a.default=s.exports}}]);